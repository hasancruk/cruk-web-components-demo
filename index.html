<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<title>CRUK Web Component</title>
  </head>
	<body>
    <header>
      <h1>CRUK Web Components</h1>
    </header>
    <main>
      <section>
        <h2>Textarea</h2>
        <form method="POST">
          <label for="thoughts">What are you thinking?</label>
          <cruk-textarea>
            <textarea name="thoughts"></textarea> 
          </cruk-textarea>
          <input type="submit" value="Send" />
        </form>
        <hr />
        <section>
          <h2>What you've been thinking about</h2>
          <ul id="comments">
          </ul>
        </section>
      </section>
      <section>
        <h2>Carousel</h2>
        <cruk-carousel>
          <img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse1.mm.bing.net%2Fth%3Fid%3DOIP.enHnJ33r9erP04V1MdL9iwHaE7%26pid%3DApi&f=1&ipt=9532000156b291da854f4bb4c135a6c265c3ac468dca392f7f1e44b2a1354354&ipo=images" alt="" />
          <img src="https://fthmb.tqn.com/M4vd2y1a6SHUAlMYYUQExR1Jnlc=/3867x2578/filters:fill(auto,1)/Shooting-in-RAW-TIFF-JPEG-5682ac103df78ccc15bfef42.jpg" alt="" />
          <img src="https://photographylife.com/wp-content/uploads/2014/09/Nikon-D750-Image-Samples-2.jpg" alt="" />
          <img src="https://www.cameraegg.org/wp-content/uploads/2016/01/Nikon-D500-Sample-Images-3.jpg" alt="" />
        </cruk-carousel>
      </section>
    </main>
    <script>
      const comments = document.querySelector("#comments");
      let emptyListItem;
      if (comments.childElementCount < 1) {
        emptyListItem = document.createElement("li");
        emptyListItem.setAttribute("data-placeholder", "");
        emptyListItem.textContent = "Nothing here so far...";
        comments.appendChild(emptyListItem);
      }

      const form = document.querySelector("form");
      const submit = document.querySelector("form > input[type='submit']");

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const formData = new FormData(form, submit);
        const thought = formData.get("thoughts");

        if (thought) {
          const placeholder = document.querySelector("#comments > [data-placeholder]");
          placeholder?.remove();

          const newThought = document.createElement("li");
          newThought.textContent = thought;
          comments.prepend(newThought);
        }

        e.target.reset();
      });
    </script>
    <script type="importmap">
      {
        "imports": {
          "cruk-carousel": "https://esm.sh/@hasancruk/cruk-carousel@0.2.1",
          "cruk-img": "https://esm.sh/@hasancruk/cruk-img@0.1.1",
          "cruk-textarea": "https://esm.sh/@hasancruk/cruk-textarea@0.1.0"
        }
      }
    </script>
    <script type="module">
      import "cruk-textarea";
      import "cruk-img";
      import "cruk-carousel";
    </script>
	</body>
</html>
